<div class="container-fluid">
  <p id="notice"><%= notice %></p>

<div class="text-center">
  <h1>Tasks</h1>
</div>
  <nav class="navbar navbar-light bg-light">
    <form class="form-inline">
        <%= search_form_for @q do |f| %>
          <%= f.search_field :task_status_task_status_name_cont, placeholder: "Task Status" %>&nbsp;&nbsp;&nbsp;
          <%= f.submit %>
        <% end %>

        <%= search_form_for @q do |f| %>
          <%= f.search_field :order_line_id_eq, placeholder: "Order Line ID" %>&nbsp;&nbsp;&nbsp;
          <%= f.submit %>
        <% end %>

        <%= search_form_for @q do |f| %>
          <%= f.search_field :task_name_cont, placeholder: "Task Name" %>&nbsp;&nbsp;&nbsp;
          <%= f.submit %>
        <% end %>

        <%= search_form_for @q do |f| %>
          <%= f.search_field :task_description_cont, placeholder: "Task Description" %>&nbsp;&nbsp;&nbsp;
          <%= f.submit %>
        <% end %>

        <%= search_form_for @q do |f| %>
          <%= f.search_field :task_start_date_cont_any, placeholder: "Start Date" %>&nbsp;&nbsp;&nbsp;
          <%= f.submit %>
        <% end %>

        <%= search_form_for @q do |f| %>
          <%= f.search_field :task_due_date_cont_any, placeholder: "Due Date" %>&nbsp;&nbsp;&nbsp;
          <%= f.submit %>
        <% end %>

        <%= search_form_for @q do |f| %>
          <%= f.search_field :task_finish_date_cont_any, placeholder: "Finish Date" %>&nbsp;&nbsp;&nbsp;
          <%= f.submit %>
        <% end %>
    </form>
    <%= link_to 'New Task', new_task_path, class: "btn btn-primary" %>
    <table id = "task_table" class="table table-hover">
      <thead class="thead-light">
        <tr>
          <th scope="col"><%= sort_link(@q, :task_status_id, "Task Status", default_order: :desc) %></th>
          <th scope="col"><%= sort_link(@q, :order_line_id, "Order Line", default_order: :desc) %></th>
          <th scope="col"><%= sort_link(@q, :task_name, "Task Name", default_order: :desc) %></th>
          <th scope="col"><%= sort_link(@q, :task_description, "Description", default_order: :desc) %></th>
          <th scope="col"><%= sort_link(@q, :task_start_date, "Start Date", default_order: :desc) %></th>
          <th scope="col"><%= sort_link(@q, :task_due_date, "Due Date", default_order: :desc) %></th>
          <th scope="col"><%= sort_link(@q, :task_finish_date, "Finish Date", default_order: :desc) %></th>
          <th colspan="3"></th>
        </tr>
      </thead>

      <tbody>
        <% @tasks.each do |task| %>
          <tr>
            <td><%= task.task_status.task_status_name %></td>
            <td><%= task.order_line_id %></td>
            <td><%= task.task_name %></td>
            <td><%= task.task_description %></td>
            <td><%= task.task_start_date.try(:strftime,"%B %e, %l:%M %p") %></td>
            <td><%= task.task_due_date.try(:strftime,"%B %e, %l:%M %p") %></td>
            <td><%= task.task_finish_date.try(:strftime,"%B %e, %l:%M %p") %></td>
            <td><%= link_to 'Show', task %></td>
            <td><%= link_to 'Edit', edit_task_path(task) %></td>
            <td><%= link_to 'Archive', archive_task_path(task),method: :patch  %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </nav>
  <br>
</div>
