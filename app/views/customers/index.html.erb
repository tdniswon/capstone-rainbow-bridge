
<div class="container-fluid">
  <p id="notice"><%= notice %></p>

  <div class="text-center">
    <h1>Customers</h1>
  </div>
  <nav class="navbar navbar-light bg-light">

    <%= search_form_for @q, {class: "form-inline"} do |f| %>
      <%= f.search_field :customer_status_customer_status_name_or_customer_first_name_or_customer_last_name_or_customer_email_or_customer_phone_or_customer_street_address_or_customer_city_or_customer_state_or_customer_zip_code_start, placeholder: "Search", class: 'form-control' %>
      <th><%= f.submit class: "btn btn-primary" %>
    <% end %>
    <%= link_to 'New Customer', new_customer_path, class: "btn btn-primary"%>

    <table id= "smort_table" class="table table-hover">

      <thead class="thead-light">
        <tr>
          <th scope="col"><%= sort_link(@q, :customer_status_id, "Customer Status", default_order: :desc) %></th>
          <th scope="col"><%= sort_link(@q, :customer_first_name, "First Name", default_order: :desc) %>  </th>
          <th scope="col"><%= sort_link(@q, :customer_last_name, "Last Name", default_order: :desc) %> </th>
          <th scope="col"><%= sort_link(@q, :customer_email, "Email", default_order: :desc) %> </th>
          <th scope="col"><%= sort_link(@q, :customer_phone, "Phone", default_order: :desc) %> </th>
          <th scope="col"><%= sort_link(@q, :customer_street_address, "Street Address", default_order: :desc) %> </th>
          <th scope="col"><%= sort_link(@q, :customer_city, "City", default_order: :desc) %> </th>
          <th scope="col"><%= sort_link(@q, :customer_state, "State", default_order: :desc) %> </th>
          <th scope="col"><%= sort_link(@q, :customer_zip_code, "Zipcode", default_order: :desc) %> </th>
          <th colspan="3"></th>
        </tr>
      </thead>

      <tbody>
        <% @customers.each do |customer| %>
          <tr>
            <td><%= customer.customer_status.customer_status_name %></td>
            <td><%= customer.customer_first_name %></td>
            <td><%= customer.customer_last_name %></td>
            <td><%= customer.customer_email %></td>
            <td><%= number_to_phone(customer.customer_phone) %></td>
            <td><%= customer.customer_street_address %></td>
            <td><%= customer.customer_city %></td>
            <td><%= customer.customer_state %></td>
            <td><%= customer.customer_zip_code %></td>
            <td><%= link_to 'Show', customer %></td>
            <td><%= link_to 'Edit', edit_customer_path(customer) %></td>
            <td><%= link_to 'Archive',archive_customer_path(customer),method: :patch  %></td>
          </tr>
        <% end %>
      </tbody>

    </table>
    <%==pagy_bootstrap_nav(@pagy)%>
  </nav>
</div>
