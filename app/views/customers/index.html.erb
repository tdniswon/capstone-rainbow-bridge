
<div class="container-fluid">
  <p id="notice"><%= notice %></p>

  <div class="text-center">
    <h1>Customers</h1>
  </div>
<nav class="navbar navbar-light bg-light">
  <form class="form-inline">
    <input class="searchBar" type="text" id="firstInput" onkeyup="firstName()" placeholder="Search by Customer's First Name" title="Type Employee's First Name">&nbsp;&nbsp;&nbsp;
    <input class="searchBar" type="text" id="secondInput" onkeyup="lastName()" placeholder="Search by Customer's Last Name" title="Type Employee's Last Name">&nbsp;&nbsp;&nbsp;
  </form>
  <%= link_to 'New Customer', new_customer_path, class: "btn btn-primary"%>

  <table id= "smort_table" class="table table-hover">
    <thead class="thead-light">
      <tr>
        <th scope="col"> <%= sortable "customer_first_name", "First Name" %>  </th>
        <th scope="col"><%= sortable "customer_last_name", "Last Name" %> </th>
        <th scope="col"><%= sortable "customer_email", "Email" %> </th>
        <th scope="col"><%= sortable "customer_phone", "Phone" %> </th>
        <th scope="col"><%= sortable "customer_street_address", "Street Address" %> </th>
        <th scope="col"><%= sortable "customer_city", "City" %> </th>
        <th scope="col"><%= sortable "customer_state", "State" %> </th>
        <th scope="col"><%= sortable "customer_zip_code", "Zipcode" %> </th>
        <th scope="col"><%= sortable "customer_status_id", "Customer Status" %> </th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @customers.each do |customer| %>
        <tr>
          <td><%= customer.customer_first_name %></td>
          <td><%= customer.customer_last_name %></td>
          <td><%= customer.customer_email %></td>
          <td><%= customer.customer_phone %></td>
          <td><%= customer.customer_street_address %></td>
          <td><%= customer.customer_city %></td>
          <td><%= customer.customer_state %></td>
          <td><%= customer.customer_zip_code %></td>
          <td><%= customer.customer_status.customer_status_name %></td>
          <td><%= link_to 'Show', customer %></td>
          <td><%= link_to 'Edit', edit_customer_path(customer) %></td>
          <td><%= link_to 'Delete', customer, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
      <% end %>
    </tbody>

  </table>

  <%==pagy_bootstrap_nav(@pagy)%>

</nav>
  <br>
  <script>
  function firstName() {
  var input, filter, table, tr, td, i, txtValue;
  input = document.getElementById("firstInput");
  filter = input.value.toUpperCase();
  table = document.getElementById("smort_table");
  tr = table.getElementsByTagName("tr");
  for (i = 0; i < tr.length; i++) {
    td = tr[i].getElementsByTagName("td")[0];
    if (td) {
      txtValue = td.textContent || td.innerText;
      if (txtValue.toUpperCase().indexOf(filter) > -1) {
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }
    }
  }
  }
  </script>
  <script>
      function lastName() {
        var input, filter, table, tr, td, i, txtValue;
        input = document.getElementById("secondInput");
        filter = input.value.toUpperCase();
        table = document.getElementById("smort_table");
        tr = table.getElementsByTagName("tr");
        for (i = 0; i < tr.length; i++) {
          td = tr[i].getElementsByTagName("td")[1];
          if (td) {
            txtValue = td.textContent || td.innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
              tr[i].style.display = "";
            } else {
              tr[i].style.display = "none";
            }
          }
        }
      }
    </script>
</div>
