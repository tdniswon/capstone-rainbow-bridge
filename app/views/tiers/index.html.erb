<div class="container-fluid">
  <p id="notice"><%= notice %></p>

<div class="text-center">
  <h1>Tiers</h1>
</div>
  <nav class="navbar navbar-light bg-light">
  <form class="form-inline">
    <input class="form-control mr-sm-2" type="search" id="firstInput" onkeyup="firstName()"  title="Type Tiers" placeholder="Search" aria-label="Search">

  </form>
<%= link_to 'New Tier', new_tier_path, class: "btn btn-primary" %>
  <table id="tier_table" class="table table-hover">
    <thead class="thead-light">
      <tr>
        <th><%= sortable "order_line_id", "Order Line" %></th>
        <th><%= sortable "position", "Position" %></th>
        <th><%= sortable "tier_size", "Tier Size" %></th>
        <th><%= sortable "shape_name", "Shape" %></th>
        <th><%= sortable "tier_special_notes", "Special Notes" %></th>
        <th><%= sortable "flavor_name", "Flavor" %></th>
        <th><%= sortable "frosting_name", "Frosting" %></th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @tiers.each do |tier| %>
        <tr>
          <td><%= tier.order_line_id %></td>
          <td><%= tier.position %></td>
          <td><%= tier.tier_size %></td>
          <td><%= tier.shape.shape_name %></td>
          <td><%= tier.tier_special_notes %></td>
          <td><%= tier.cake_flavor.flavor_name %></td>
          <td><%= tier.frosting_flavor.frosting_name %></td>
          <td><%= link_to 'Show', tier %></td>
          <td><%= link_to 'Edit', edit_tier_path(tier) %></td>
          <td><%= link_to 'Delete', tier, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <br>
  <script>
  function firstName() {
    var input, filter, table, tr, td, i, txtValue;
    input = document.getElementById("firstInput");
    filter = input.value.toUpperCase();
    table = document.getElementById("tier_table");
    tr = table.getElementsByTagName("tr");
    for (i = 0; i < tr.length; i++) {
      td = tr[i].getElementsByTagName("td")[0];
      if (td) {
        txtValue = td.textContent || td.innerText;
        if (txtValue.toUpperCase().indexOf(filter) > -1) {
          tr[i].style.display = "";
        } else {
          tr[i].style.display = "none";
        }
      }
    }
  }
  </script>
</div>
