<div class="container-fluid">
  <p id="notice"><%= notice %></p>

  <div class="text-center">
    <h1>Orders</h1>
  </div>

    <nav class="navbar navbar-light bg-light">
      <%= search_form_for @q, {class: "form-inline"} do |f| %>
        <%= f.search_field :order_status_order_status_name_or_order_type_order_description_or_customer_customer_first_name_or_customer_customer_last_name_or_order_description_or_delivery_street_address_or_delivery_city_or_delivery_state_or_delivery_zip_code_start, placeholder: "Search", class: 'form-control' %>
        <th><%= f.submit class: "btn btn-primary" %>
      <% end %>
      
      <%= link_to 'New Order', new_order_path, class: "btn btn-primary" %>
      <table id = "order_table" class="table table-hover">
        <thead class="thead-light">
          <tr>
            <th scope="col"><%= sort_link(@q, :order_status_id, "Status", default_order: :desc) %></th>
            <th scope="col"><%= sort_link(@q, :order_type_id, "Type", default_order: :desc) %></th>
            <th scope="col"><%= sort_link(@q, :customer_last_name, "Name", default_order: :desc) %></th>
            <th scope="col"><%= sort_link(@q, :order_description, "Description", default_order: :desc) %></th>
            <th scope="col"><%= sort_link(@q, :order_cost, "Cost", default_order: :desc) %></th>
            <th scope="col"><%= sort_link(@q, :order_start_date, "Start", default_order: :desc) %></th>
            <th scope="col"><%= sort_link(@q, :order_due_date, "Due", default_order: :desc) %></th>
            <th scope="col"><%= sort_link(@q, :order_date_finish, "Finish", default_order: :desc) %></th>
            <th scope="col"><%= sort_link(@q, :order_delivery, "Delivery", default_order: :desc) %></th>
            <th scope="col"><%= sort_link(@q, :delivery_street_address, "Address", default_order: :desc) %></th>
            <th scope="col"><%= sort_link(@q, :delivery_city, "City", default_order: :desc) %></th>
            <th scope="col"><%= sort_link(@q, :delivery_state, "State", default_order: :desc) %> </th>
            <th scope="col"><%= sort_link(@q, :delivery_zip_code, "Zip", default_order: :desc) %></th>
            <th colspan="3"></th>
          </tr>
        </thead>

        <tbody>
          <% @orders.each do |order| %>
            <tr>
              <td><%= order.order_status.order_status_name %></td>
              <td><%= order.order_type.order_description %></td>
              <td><%= order.customer.customer_first_name %> <%= order.customer.customer_last_name %></td>
              <td><%= order.order_description %></td>
              <td><%= order.order_cost %></td>
              <td><%= order.order_start_date.try(:strftime,"%B %e, %l:%M %p") %></td>
              <td><%= order.order_due_date.try(:strftime,"%B %e, %l:%M %p") %></td>
              <td><%= order.order_date_finish.try(:strftime,"%B %e, %l:%M %p") %></td>
              <td><% order.order_delivery %>
                <% if order.order_delivery == true %>
                <%= image_tag "check.png", class: "check"%>
                <% else %>
                  <%= image_tag "cross.png", class: "cross"%>
                <% end %></td>
              <td><%= order.delivery_street_address %></td>
              <td><%= order.delivery_city %></td>
              <td><%= order.delivery_state %></td>
              <td><%= order.delivery_zip_code %></td>
              <td><%= link_to 'Show', order %></td>
              <td><%= link_to 'Edit', edit_order_path(order) %></td>
              <td><%= link_to 'Archive', archive_order_path(order),method: :patch  %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <%==pagy_bootstrap_nav(@pagy)%>
  </nav>

</div>
